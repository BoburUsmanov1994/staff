(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5099],{19594:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var s=r(63366),n=r(87462),i=r(67294),o=r(86010),a=r(94780),l=r(57742),c=r(67074),d=r(78884),x=r(1588),h=r(34867);function u(e){return(0,h.Z)("MuiListItemAvatar",e)}(0,x.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var m=r(85893);let p=["className"],g=e=>{let{alignItems:t,classes:r}=e;return(0,a.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},u,r)},j=(0,c.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver(e,t){let{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})(({ownerState:e})=>(0,n.Z)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8})),Z=i.forwardRef(function(e,t){let r=(0,d.Z)({props:e,name:"MuiListItemAvatar"}),{className:a}=r,c=(0,s.Z)(r,p),x=i.useContext(l.Z),h=(0,n.Z)({},r,{alignItems:x.alignItems}),u=g(h);return(0,m.jsx)(j,(0,n.Z)({className:(0,o.Z)(u.root,a),ownerState:h,ref:t},c))});var f=Z},61702:function(e,t,r){"use strict";var s=r(63366),n=r(87462),i=r(67294),o=r(86010),a=r(94780),l=r(29630),c=r(57742),d=r(78884),x=r(67074),h=r(97484),u=r(85893);let m=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],p=e=>{let{classes:t,inset:r,primary:s,secondary:n,dense:i}=e;return(0,a.Z)({root:["root",r&&"inset",i&&"dense",s&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},h.L,t)},g=(0,x.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver(e,t){let{ownerState:r}=e;return[{[`& .${h.Z.primary}`]:t.primary},{[`& .${h.Z.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})(({ownerState:e})=>(0,n.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),j=i.forwardRef(function(e,t){let r=(0,d.Z)({props:e,name:"MuiListItemText"}),{children:a,className:x,disableTypography:h=!1,inset:j=!1,primary:Z,primaryTypographyProps:f,secondary:b,secondaryTypographyProps:y}=r,v=(0,s.Z)(r,m),{dense:w}=i.useContext(c.Z),C=null!=Z?Z:a,S=b,k=(0,n.Z)({},r,{disableTypography:h,inset:j,primary:!!C,secondary:!!S,dense:w}),P=p(k);return null==C||C.type===l.Z||h||(C=(0,u.jsx)(l.Z,(0,n.Z)({variant:w?"body2":"body1",className:P.primary,component:null!=f&&f.variant?void 0:"span",display:"block"},f,{children:C}))),null==S||S.type===l.Z||h||(S=(0,u.jsx)(l.Z,(0,n.Z)({variant:"body2",className:P.secondary,color:"text.secondary",display:"block"},y,{children:S}))),(0,u.jsxs)(g,(0,n.Z)({className:(0,o.Z)(P.root,x),ownerState:k,ref:t},v,{children:[C,S]}))});t.Z=j},42427:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/chat",function(){return r(98440)}])},31283:function(e,t,r){"use strict";var s=r(85893),n=r(67294),i=r(58735),o=r(61953);let a=e=>{let{sx:t,show:r,direction:a,children:l,hideBackdrop:c,onOpen:d,onClose:x,backDropClick:h}=e,u=()=>{h&&h()};return(0,n.useEffect)(()=>{r&&d&&d(),!1===r&&x&&x()},[x,d,r]),(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.Z,{sx:{top:0,height:"100%",zIndex:"drawer",position:"absolute",transition:"all 0.25s ease-in-out",backgroundColor:"background.paper",...r?{opacity:1}:{opacity:0},..."right"===a?{left:"auto",right:r?0:"-100%"}:{right:"auto",left:r?0:"-100%"},...t},children:l}),c?null:(0,s.jsx)(i.Z,{open:r,transitionDuration:250,onClick:u,sx:{position:"absolute",zIndex:e=>e.zIndex.drawer-1}})]})};t.Z=a,a.defaultProps={direction:"left"}},59882:function(e,t,r){"use strict";r.d(t,{N:function(){return a},mf:function(){return o},oS:function(){return n},tE:function(){return l}});let s=e=>{let t=new Date;return new Date(e).getDate()===t.getDate()&&new Date(e).getMonth()===t.getMonth()&&new Date(e).getFullYear()===t.getFullYear()},n=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=new Date(e),n={month:"short",day:"numeric"};return t&&s(r)&&(n={hour:"numeric",minute:"numeric"}),new Intl.DateTimeFormat("en-US",n).format(new Date(e))},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\D+/g,"")},o=(e,t)=>{let r;if(!e)return e;let s=t.fns.cardType(e),n=i(e);switch(s){case"amex":r="".concat(n.slice(0,4)," ").concat(n.slice(4,10)," ").concat(n.slice(10,15));break;case"dinersclub":r="".concat(n.slice(0,4)," ").concat(n.slice(4,10)," ").concat(n.slice(10,14));break;default:r="".concat(n.slice(0,4)," ").concat(n.slice(4,8)," ").concat(n.slice(8,12)," ").concat(n.slice(12,19))}return r.trim()},a=e=>{let t=e.replace(/^([1-9]\/|[2-9])$/g,"0$1/").replace(/^(0[1-9]|1[0-2])$/g,"$1/").replace(/^([0-1])([3-9])$/g,"0$1/$2").replace(/^(0?[1-9]|1[0-2])([0-9]{2})$/g,"$1/$2").replace(/^([0]+)\/|[0]+$/g,"0").replace(/[^\d\/]|^[\/]*$/g,"").replace(/\/\//g,"/");return t},l=(e,t,r)=>{let s=i(e),n=r.fns.cardType(t);return s.slice(0,"amex"===n?4:3)}},98440:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return J}});var s=r(85893),n=r(67294),i=r(61953),o=r(62097),a=r(61225),l=r(9473),c=r(75538),d=r(51514),x=r(83552),h=r(59882),u=r(11163),m=r(85214),p=r(21448),g=r(60082),j=r(60684),Z=r(72347),f=r(18746),b=r(67836),y=r(80562),v=r(29630),w=r(61702),C=r(19594),S=r(95309),k=r(9041),P=r(51964),I=r.n(P),R=r(21609),z=r(92024),T=r(15497),N=r(54225),M=r(41470),D=r(29894),L=r(22841),F=r(31283);let A=e=>{let{store:t,hidden:r,statusObj:o,userStatus:a,sidebarWidth:l,setUserStatus:c,userProfileLeftOpen:d,handleUserProfileLeftSidebarToggle:x}=e,h=e=>{c(e.target.value)},u=e=>{let{children:t}=e;return r?(0,s.jsx)(i.Z,{sx:{height:"100%",overflowY:"auto",overflowX:"hidden"},children:t}):(0,s.jsx)(I(),{options:{wheelPropagation:!1},children:t})};return(0,s.jsx)(F.Z,{show:d,backDropClick:x,sx:{zIndex:9,height:"100%",width:l,borderTopLeftRadius:e=>e.shape.borderRadius,borderBottomLeftRadius:e=>e.shape.borderRadius,"& + .MuiBackdrop-root":{zIndex:8,borderRadius:1}},children:t&&t.userProfile?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(y.Z,{size:"small",onClick:x,sx:{top:".7rem",right:".7rem",position:"absolute"},children:(0,s.jsx)(R.Z,{icon:"mdi:close"})}),(0,s.jsxs)(i.Z,{sx:{px:5,pb:7,pt:9.5,display:"flex",flexDirection:"column"},children:[(0,s.jsx)(i.Z,{sx:{mb:4.25,display:"flex",justifyContent:"center"},children:(0,s.jsx)(g.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,s.jsx)(i.Z,{component:"span",sx:{width:10,height:10,borderRadius:"50%",color:"".concat(o[a],".main"),backgroundColor:"".concat(o[a],".main"),boxShadow:e=>"0 0 0 2px ".concat(e.palette.background.paper)}}),children:(0,s.jsx)(Z.Z,{sx:{width:84,height:84},src:t.userProfile.avatar,alt:t.userProfile.fullName})})}),(0,s.jsx)(v.Z,{sx:{mb:.75,fontWeight:600,textAlign:"center"},children:t.userProfile.fullName}),(0,s.jsx)(v.Z,{variant:"body2",sx:{textAlign:"center",textTransform:"capitalize"},children:t.userProfile.role})]}),(0,s.jsx)(i.Z,{sx:{height:"calc(100% - 13.375rem)"},children:(0,s.jsx)(u,{children:(0,s.jsxs)(i.Z,{sx:{p:5},children:[(0,s.jsx)(v.Z,{variant:"body2",sx:{mb:1.5,textTransform:"uppercase"},children:"About"}),(0,s.jsx)(b.Z,{minRows:3,multiline:!0,fullWidth:!0,sx:{mb:6},defaultValue:t.userProfile.about}),(0,s.jsx)(v.Z,{variant:"body2",sx:{mb:1.5,textTransform:"uppercase"},children:"Status"}),(0,s.jsxs)(M.Z,{value:a,sx:{mb:6.5,ml:.8},onChange:h,children:[(0,s.jsx)("div",{children:(0,s.jsx)(L.Z,{value:"online",label:"Online",control:(0,s.jsx)(T.Z,{size:"small",color:"success",sx:{p:1.5}}),sx:{"& .MuiFormControlLabel-label":{ml:1,color:"text.secondary"}}})}),(0,s.jsx)("div",{children:(0,s.jsx)(L.Z,{value:"away",label:"Away",control:(0,s.jsx)(T.Z,{size:"small",color:"warning",sx:{p:1.5}}),sx:{"& .MuiFormControlLabel-label":{ml:1,color:"text.secondary"}}})}),(0,s.jsx)("div",{children:(0,s.jsx)(L.Z,{value:"busy",label:"Do not Disturb",control:(0,s.jsx)(T.Z,{size:"small",color:"error",sx:{p:1.5}}),sx:{"& .MuiFormControlLabel-label":{ml:1,color:"text.secondary"}}})}),(0,s.jsx)("div",{children:(0,s.jsx)(L.Z,{value:"offline",label:"Offline",control:(0,s.jsx)(T.Z,{size:"small",color:"secondary",sx:{p:1.5}}),sx:{"& .MuiFormControlLabel-label":{ml:1,color:"text.secondary"}}})})]}),(0,s.jsx)(v.Z,{variant:"body2",sx:{mb:1.5,textTransform:"uppercase"},children:"Settings"}),(0,s.jsxs)(m.Z,{dense:!0,sx:{p:0,mb:6},children:[(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:2},children:(0,s.jsx)(R.Z,{icon:"mdi:check-circle-outline",fontSize:"1.25rem"})}),(0,s.jsx)(w.Z,{secondary:"Two-step Verification"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:2},children:(0,s.jsx)(R.Z,{icon:"mdi:bell-outline",fontSize:"1.25rem"})}),(0,s.jsx)(w.Z,{secondary:"Notification"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:2},children:(0,s.jsx)(R.Z,{icon:"mdi:account-outline",fontSize:"1.25rem"})}),(0,s.jsx)(w.Z,{secondary:"Invite Friends"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:2},children:(0,s.jsx)(R.Z,{icon:"mdi:delete-outline",fontSize:"1.25rem"})}),(0,s.jsx)(w.Z,{secondary:"Delete Account"})]})})]}),(0,s.jsx)(N.Z,{variant:"contained",children:"Logout"})]})})})]}):null})},O=e=>{let{children:t,hidden:r}=e;return r?(0,s.jsx)(i.Z,{sx:{height:"100%",overflow:"auto"},children:t}):(0,s.jsx)(I(),{options:{wheelPropagation:!1},children:t})},_=e=>{let{store:t,hidden:r,mdAbove:o,dispatch:a,statusObj:l,userStatus:c,selectChat:d,getInitials:x,sidebarWidth:h,setUserStatus:P,leftSidebarOpen:I,removeSelectedChat:T,userProfileLeftOpen:N,formatDateToMonthShort:M,handleLeftSidebarToggle:D,handleUserProfileLeftSidebarToggle:L}=e,[F,_]=(0,n.useState)(""),[E,W]=(0,n.useState)([]),[B,$]=(0,n.useState)([]),[U,X]=(0,n.useState)(null),Y=(0,u.useRouter)(),G=(e,t)=>{a(d(t)),X({type:e,id:t}),o||D()};(0,n.useEffect)(()=>{t&&t.chats&&null!==U&&"contact"===U.type&&U.id===t.chats[0].id&&X({type:"chat",id:U.id})},[t,U]),(0,n.useEffect)(()=>(Y.events.on("routeChangeComplete",()=>{X(null),a(T())}),()=>{X(null),a(T())}),[]);let Q=e=>{if(null!==t.chats){let r=t.chats.filter(t=>t.id===e);return!!r.length}},V=e=>{if(_(e.target.value),null!==t.chats&&null!==t.contacts){let r=t=>t.fullName.toLowerCase().includes(e.target.value.toLowerCase()),s=t.chats.filter(r),n=t.contacts.filter(r);W(s),$(n)}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)(j.ZP,{open:I,onClose:D,variant:o?"permanent":"temporary",ModalProps:{disablePortal:!0,keepMounted:!0},sx:{zIndex:7,height:"100%",display:"block",position:o?"static":"absolute","& .MuiDrawer-paper":{boxShadow:"none",overflow:"hidden",width:h,position:o?"static":"absolute",borderTopLeftRadius:e=>e.shape.borderRadius,borderBottomLeftRadius:e=>e.shape.borderRadius},"& > .MuiBackdrop-root":{borderRadius:1,position:"absolute",zIndex:e=>e.zIndex.drawer-1}},children:[(0,s.jsxs)(i.Z,{sx:{px:5.5,py:3.5,display:"flex",alignItems:"center",borderBottom:e=>"1px solid ".concat(e.palette.divider)},children:[t&&t.userProfile?(0,s.jsx)(g.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{mr:4.5},onClick:L,badgeContent:(0,s.jsx)(i.Z,{component:"span",sx:{width:8,height:8,borderRadius:"50%",color:"".concat(l[c],".main"),backgroundColor:"".concat(l[c],".main"),boxShadow:e=>"0 0 0 2px ".concat(e.palette.background.paper)}}),children:(0,s.jsx)(Z.Z,{src:t.userProfile.avatar,alt:t.userProfile.fullName,sx:{width:40,height:40,cursor:"pointer"}})}):null,(0,s.jsx)(b.Z,{fullWidth:!0,size:"small",value:F,onChange:V,placeholder:"Search for contact...",sx:{"& .MuiInputBase-root":{borderRadius:5}},InputProps:{startAdornment:(0,s.jsx)(k.Z,{position:"start",children:(0,s.jsx)(R.Z,{icon:"mdi:magnify",fontSize:"1.25rem"})})}}),o?null:(0,s.jsx)(y.Z,{sx:{p:1,ml:1},onClick:D,children:(0,s.jsx)(R.Z,{icon:"mdi:close",fontSize:"1.375rem"})})]}),(0,s.jsx)(i.Z,{sx:{height:"calc(100% - 4.125rem)"},children:(0,s.jsx)(O,{hidden:r,children:(0,s.jsxs)(i.Z,{sx:{p:e=>e.spacing(5,3,3)},children:[(0,s.jsx)(v.Z,{variant:"h6",sx:{ml:2,mb:4,color:"primary.main"},children:"Chats"}),(0,s.jsx)(m.Z,{sx:{mb:7.5,p:0},children:(()=>{if(t&&t.chats&&t.chats.length){if(F.length&&!E.length)return(0,s.jsx)(f.ZP,{children:(0,s.jsx)(v.Z,{sx:{color:"text.secondary"},children:"No Chats Found"})});{let e=F.length&&E.length?E:t.chats;return e.map((e,t)=>{let{lastMessage:r}=e.chat,n=null!==U&&U.id===e.id&&"chat"===U.type;return(0,s.jsx)(f.ZP,{disablePadding:!0,sx:{"&:not(:last-child)":{mb:1.5}},children:(0,s.jsxs)(S.Z,{disableRipple:!0,onClick:()=>G("chat",e.id),sx:{px:2.5,py:2.5,width:"100%",borderRadius:1,alignItems:"flex-start",...n&&{backgroundColor:e=>"".concat(e.palette.primary.main," !important")}},children:[(0,s.jsx)(C.Z,{sx:{m:0},children:(0,s.jsx)(g.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,s.jsx)(i.Z,{component:"span",sx:{width:8,height:8,borderRadius:"50%",color:"".concat(l[e.status],".main"),backgroundColor:"".concat(l[e.status],".main"),boxShadow:e=>"0 0 0 2px ".concat(n?e.palette.common.white:e.palette.background.paper)}}),children:e.avatar?(0,s.jsx)(Z.Z,{src:e.avatar,alt:e.fullName,sx:{width:40,height:40,outline:e=>"2px solid ".concat(n?e.palette.common.white:"transparent")}}):(0,s.jsx)(z.Z,{color:e.avatarColor,skin:n?"light-static":"light",sx:{width:40,height:40,fontSize:"1rem",outline:e=>"2px solid ".concat(n?e.palette.common.white:"transparent")},children:x(e.fullName)})})}),(0,s.jsx)(w.Z,{sx:{my:0,ml:4,mr:1.5,"& .MuiTypography-root":{...n&&{color:"common.white"}}},primary:(0,s.jsx)(v.Z,{noWrap:!0,sx:{...n?{}:{color:"text.secondary"}},children:e.fullName}),secondary:(0,s.jsx)(v.Z,{noWrap:!0,variant:"body2",sx:{...!n&&{color:"text.disabled"}},children:r?r.message:null})}),(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"flex-end",flexDirection:"column",justifyContent:"flex-start"},children:[(0,s.jsx)(v.Z,{sx:{whiteSpace:"nowrap",color:n?"common.white":"text.disabled"},children:(0,s.jsx)(s.Fragment,{children:r?M(r.time,!0):new Date})}),e.chat.unseenMsgs&&e.chat.unseenMsgs>0?(0,s.jsx)(p.Z,{color:"error",label:e.chat.unseenMsgs,sx:{mt:.5,height:18,fontWeight:600,fontSize:"0.75rem","& .MuiChip-label":{pt:.25,px:1.655}}}):null]})]})},t)})}}})()}),(0,s.jsx)(v.Z,{variant:"h6",sx:{ml:2,mb:4,color:"primary.main"},children:"Contacts"}),(0,s.jsx)(m.Z,{sx:{p:0},children:(()=>{if(t&&t.chats&&t.chats.length){if(F.length&&!B.length)return(0,s.jsx)(f.ZP,{children:(0,s.jsx)(v.Z,{sx:{color:"text.secondary"},children:"No Contacts Found"})});{let e=F.length&&B.length?B:t.contacts;return null!==e?e.map((e,t)=>{let r=null!==U&&U.id===e.id&&"contact"===U.type&&!Q(e.id);return(0,s.jsx)(f.ZP,{disablePadding:!0,sx:{"&:not(:last-child)":{mb:1.5}},children:(0,s.jsxs)(S.Z,{disableRipple:!0,onClick:()=>G(Q(e.id)?"chat":"contact",e.id),sx:{px:2.5,py:2.5,width:"100%",borderRadius:1,...r&&{backgroundColor:e=>"".concat(e.palette.primary.main," !important")}},children:[(0,s.jsx)(C.Z,{sx:{m:0},children:e.avatar?(0,s.jsx)(Z.Z,{alt:e.fullName,src:e.avatar,sx:{width:40,height:40,outline:e=>"2px solid ".concat(r?e.palette.common.white:"transparent")}}):(0,s.jsx)(z.Z,{color:e.avatarColor,skin:r?"light-static":"light",sx:{width:40,height:40,fontSize:"1rem",outline:e=>"2px solid ".concat(r?e.palette.common.white:"transparent")},children:x(e.fullName)})}),(0,s.jsx)(w.Z,{sx:{my:0,ml:4,...r&&{"& .MuiTypography-root":{color:"common.white"}}},primary:(0,s.jsx)(v.Z,{sx:{...r?{}:{color:"text.secondary"}},children:e.fullName}),secondary:(0,s.jsx)(v.Z,{noWrap:!0,variant:"body2",sx:{...!r&&{color:"text.disabled"}},children:e.about})})]})},t)}):null}}})()})]})})})]}),(0,s.jsx)(A,{store:t,hidden:r,statusObj:l,userStatus:c,sidebarWidth:h,setUserStatus:P,userProfileLeftOpen:N,handleUserProfileLeftSidebarToggle:L})]})};var E=r(67074);let W=(0,E.ZP)(I())(e=>{let{theme:t}=e;return{padding:t.spacing(5)}}),B=e=>{let{data:t,hidden:r}=e,o=(0,n.useRef)(null),a=()=>{o.current&&(r?o.current.scrollTop=Number.MAX_SAFE_INTEGER:o.current._container.scrollTop=Number.MAX_SAFE_INTEGER)},l=()=>{let e=[];t.chat&&(e=t.chat.chat);let r=[],s=e[0]?e[0].senderId:11,n={senderId:s,messages:[]};return e.forEach((t,i)=>{s===t.senderId?n.messages.push({time:t.time,msg:t.message,feedback:t.feedback}):(s=t.senderId,r.push(n),n={senderId:t.senderId,messages:[{time:t.time,msg:t.message,feedback:t.feedback}]}),i===e.length-1&&r.push(n)}),r},c=(e,t)=>{if(e)return t.isSent&&!t.isDelivered?(0,s.jsx)(i.Z,{component:"span",sx:{display:"inline-flex","& svg":{mr:2,color:"text.secondary"}},children:(0,s.jsx)(R.Z,{icon:"mdi:check",fontSize:"1rem"})}):t.isSent&&t.isDelivered?(0,s.jsx)(i.Z,{component:"span",sx:{display:"inline-flex","& svg":{mr:2,color:t.isSeen?"success.main":"text.secondary"}},children:(0,s.jsx)(R.Z,{icon:"mdi:check-all",fontSize:"1rem"})}):null};(0,n.useEffect)(()=>{t&&t.chat&&t.chat.chat.length&&a()},[t]);let d=e=>{let{children:t}=e;return r?(0,s.jsx)(i.Z,{ref:o,sx:{p:5,height:"100%",overflowY:"auto",overflowX:"hidden"},children:t}):(0,s.jsx)(W,{ref:o,options:{wheelPropagation:!1},children:t})};return(0,s.jsx)(i.Z,{sx:{height:"calc(100% - 8.4375rem)"},children:(0,s.jsx)(d,{children:l().map((e,r)=>{let n=e.senderId===t.userContact.id;return(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:n?"row-reverse":"row",mb:r!==l().length-1?9.75:void 0},children:[(0,s.jsx)("div",{children:(0,s.jsx)(z.Z,{skin:"light",color:t.contact.avatarColor?t.contact.avatarColor:void 0,sx:{width:"2rem",height:"2rem",fontSize:"0.875rem",ml:n?4:void 0,mr:n?void 0:4},...t.contact.avatar&&!n?{src:t.contact.avatar,alt:t.contact.fullName}:{},...n?{src:t.userContact.avatar,alt:t.userContact.fullName}:{},children:t.contact.avatarColor?(0,x.Q)(t.contact.fullName):null})}),(0,s.jsx)(i.Z,{className:"chat-body",sx:{maxWidth:["calc(100% - 5.75rem)","75%","65%"]},children:e.messages.map((e,t,r)=>{let{length:o}=r,a=new Date(e.time);return(0,s.jsxs)(i.Z,{sx:{"&:not(:last-of-type)":{mb:3.5}},children:[(0,s.jsx)("div",{children:(0,s.jsx)(v.Z,{sx:{boxShadow:1,borderRadius:1,width:"fit-content",fontSize:"0.875rem",p:e=>e.spacing(3,4),ml:n?"auto":void 0,borderTopLeftRadius:n?void 0:0,borderTopRightRadius:n?0:void 0,color:n?"common.white":"text.primary",backgroundColor:n?"primary.main":"background.paper"},children:e.msg})}),t+1===o?(0,s.jsxs)(i.Z,{sx:{mt:1,display:"flex",alignItems:"center",justifyContent:n?"flex-end":"flex-start"},children:[c(n,e.feedback),(0,s.jsx)(v.Z,{variant:"caption",sx:{color:"text.disabled"},children:a?new Date(a).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}):null})]}):null]},t)})})]},r)})})})},$=(0,E.ZP)(i.Z)(e=>{let{theme:t}=e;return{display:"flex",borderRadius:8,alignItems:"center",boxShadow:t.shadows[1],padding:t.spacing(1.25,4),justifyContent:"space-between",backgroundColor:t.palette.background.paper}}),U=(0,E.ZP)("form")(e=>{let{theme:t}=e;return{padding:t.spacing(0,5,5)}}),X=e=>{let{store:t,dispatch:r,sendMsg:o}=e,[a,l]=(0,n.useState)(""),c=e=>{e.preventDefault(),t&&t.selectedChat&&a.trim().length&&r(o({...t.selectedChat,message:a})),l("")};return(0,s.jsx)(U,{onSubmit:c,children:(0,s.jsxs)($,{children:[(0,s.jsx)(i.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:(0,s.jsx)(b.Z,{fullWidth:!0,value:a,size:"small",placeholder:"Type your message here…",onChange:e=>l(e.target.value),sx:{"& .MuiOutlinedInput-input":{pl:0},"& fieldset":{border:"0 !important"}}})}),(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(y.Z,{size:"small",sx:{mr:1.5,color:"text.primary"},children:(0,s.jsx)(R.Z,{icon:"mdi:microphone",fontSize:"1.375rem"})}),(0,s.jsxs)(y.Z,{size:"small",component:"label",htmlFor:"upload-img",sx:{mr:2.75,color:"text.primary"},children:[(0,s.jsx)(R.Z,{icon:"mdi:attachment",fontSize:"1.375rem"}),(0,s.jsx)("input",{hidden:!0,type:"file",id:"upload-img"})]}),(0,s.jsx)(N.Z,{type:"submit",variant:"contained",children:"Send"})]})]})})};var Y=r(4560),G=r(22416);let Q=e=>{let{store:t,hidden:r,statusObj:o,getInitials:a,sidebarWidth:l,userProfileRightOpen:c,handleUserProfileRightSidebarToggle:d}=e,x=e=>{let{children:t}=e;return r?(0,s.jsx)(i.Z,{sx:{height:"100%",overflowY:"auto",overflowX:"hidden"},children:t}):(0,s.jsx)(I(),{options:{wheelPropagation:!1},children:t})};return(0,s.jsx)(F.Z,{direction:"right",show:c,backDropClick:d,sx:{zIndex:9,height:"100%",width:l,borderTopRightRadius:e=>e.shape.borderRadius,borderBottomRightRadius:e=>e.shape.borderRadius,"& + .MuiBackdrop-root":{zIndex:8,borderRadius:1}},children:t&&t.selectedChat?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(i.Z,{sx:{position:"relative"},children:[(0,s.jsx)(y.Z,{size:"small",onClick:d,sx:{top:"0.7rem",right:"0.7rem",position:"absolute",color:"text.secondary","& svg":{color:"action.active"}},children:(0,s.jsx)(R.Z,{icon:"mdi:close"})}),(0,s.jsxs)(i.Z,{sx:{px:5,pb:7,pt:9.5,display:"flex",flexDirection:"column"},children:[(0,s.jsx)(i.Z,{sx:{mb:4,display:"flex",justifyContent:"center"},children:(0,s.jsx)(g.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,s.jsx)(i.Z,{component:"span",sx:{width:10,height:10,borderRadius:"50%",color:"".concat(o[t.selectedChat.contact.status],".main"),boxShadow:e=>"0 0 0 2px ".concat(e.palette.background.paper),backgroundColor:"".concat(o[t.selectedChat.contact.status],".main")}}),children:t.selectedChat.contact.avatar?(0,s.jsx)(Z.Z,{sx:{width:"5rem",height:"5rem"},src:t.selectedChat.contact.avatar,alt:t.selectedChat.contact.fullName}):(0,s.jsx)(z.Z,{skin:"light",color:t.selectedChat.contact.avatarColor,sx:{width:"5rem",height:"5rem",fontWeight:500,fontSize:"2rem"},children:a(t.selectedChat.contact.fullName)})})}),(0,s.jsx)(v.Z,{sx:{mb:.75,fontWeight:600,textAlign:"center"},children:t.selectedChat.contact.fullName}),(0,s.jsx)(v.Z,{variant:"body2",sx:{textAlign:"center"},children:t.selectedChat.contact.role})]})]}),(0,s.jsx)(i.Z,{sx:{height:"calc(100% - 13.0625rem)"},children:(0,s.jsx)(x,{children:(0,s.jsxs)(i.Z,{sx:{p:5},children:[(0,s.jsxs)(G.Z,{sx:{mb:6},children:[(0,s.jsx)(v.Z,{variant:"body2",sx:{mb:1.5,textTransform:"uppercase"},children:"About"}),(0,s.jsx)(v.Z,{variant:"body2",sx:{fontSize:"0.875rem"},children:t.selectedChat.contact.about})]}),(0,s.jsxs)(i.Z,{sx:{mb:6},children:[(0,s.jsx)(v.Z,{variant:"body2",sx:{mb:1.5,textTransform:"uppercase"},children:"Personal Information"}),(0,s.jsxs)(m.Z,{dense:!0,sx:{p:0},children:[(0,s.jsxs)(f.ZP,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:email-outline"})}),(0,s.jsx)(w.Z,{sx:{textTransform:"lowercase"},secondary:"".concat(t.selectedChat.contact.fullName.replace(/\s/g,"_"),"@email.com")})]}),(0,s.jsxs)(f.ZP,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:phone-outline"})}),(0,s.jsx)(w.Z,{secondary:"+1(123) 456 - 7890"})]}),(0,s.jsxs)(f.ZP,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:clock-time-five-outline"})}),(0,s.jsx)(w.Z,{secondary:"Mon - Fri 10AM - 8PM"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Z,{variant:"body2",sx:{mb:1.5,textTransform:"uppercase"},children:"Settings"}),(0,s.jsxs)(m.Z,{dense:!0,sx:{p:0},children:[(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:bookmark-outline"})}),(0,s.jsx)(w.Z,{secondary:"Add Tag"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:star-outline"})}),(0,s.jsx)(w.Z,{secondary:"Important Contact"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:image-outline"})}),(0,s.jsx)(w.Z,{secondary:"Shared Media"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:3},children:(0,s.jsx)(R.Z,{icon:"mdi:delete-outline"})}),(0,s.jsx)(w.Z,{secondary:"Delete Contact"})]})}),(0,s.jsx)(f.ZP,{disablePadding:!0,children:(0,s.jsxs)(S.Z,{sx:{px:2},children:[(0,s.jsx)(D.Z,{sx:{mr:2.5,ml:.5},children:(0,s.jsx)(R.Z,{icon:"mdi:block-helper",fontSize:20})}),(0,s.jsx)(w.Z,{secondary:"Block Contact"})]})})]})]})]})})})]}):null})},V=(0,E.ZP)(i.Z)(e=>{let{theme:t}=e;return{flexGrow:1,height:"100%",display:"flex",borderRadius:1,alignItems:"center",flexDirection:"column",justifyContent:"center",backgroundColor:t.palette.action.hover}}),H=e=>{let{store:t,hidden:r,sendMsg:o,mdAbove:a,dispatch:l,statusObj:c,getInitials:d,sidebarWidth:x,userProfileRightOpen:h,handleLeftSidebarToggle:u,handleUserProfileRightSidebarToggle:m}=e,p=()=>{a||u()};return(()=>{if(!t)return null;{let e=t.selectedChat;return e?(0,s.jsxs)(i.Z,{sx:{flexGrow:1,width:"100%",height:"100%",backgroundColor:"action.hover"},children:[(0,s.jsxs)(i.Z,{sx:{py:3,px:5,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:e=>"1px solid ".concat(e.palette.divider)},children:[(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[a?null:(0,s.jsx)(y.Z,{onClick:u,sx:{mr:2},children:(0,s.jsx)(R.Z,{icon:"mdi:menu"})}),(0,s.jsxs)(i.Z,{onClick:m,sx:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,s.jsx)(g.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{mr:4.5},badgeContent:(0,s.jsx)(i.Z,{component:"span",sx:{width:8,height:8,borderRadius:"50%",color:"".concat(c[e.contact.status],".main"),boxShadow:e=>"0 0 0 2px ".concat(e.palette.background.paper),backgroundColor:"".concat(c[e.contact.status],".main")}}),children:e.contact.avatar?(0,s.jsx)(Z.Z,{src:e.contact.avatar,alt:e.contact.fullName,sx:{width:40,height:40}}):(0,s.jsx)(z.Z,{skin:"light",color:e.contact.avatarColor,sx:{width:40,height:40,fontSize:"1rem"},children:d(e.contact.fullName)})}),(0,s.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(v.Z,{sx:{color:"text.secondary"},children:e.contact.fullName}),(0,s.jsx)(v.Z,{variant:"body2",sx:{color:"text.disabled"},children:e.contact.role})]})]})]}),(0,s.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center"},children:[a?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(y.Z,{size:"small",sx:{color:"text.secondary"},children:(0,s.jsx)(R.Z,{icon:"mdi:phone-outline"})}),(0,s.jsx)(y.Z,{size:"small",sx:{color:"text.secondary"},children:(0,s.jsx)(R.Z,{icon:"mdi:video-outline",fontSize:"1.5rem"})}),(0,s.jsx)(y.Z,{size:"small",sx:{color:"text.secondary"},children:(0,s.jsx)(R.Z,{icon:"mdi:magnify"})})]}):null,(0,s.jsx)(Y.Z,{menuProps:{sx:{mt:2}},icon:(0,s.jsx)(R.Z,{icon:"mdi:dots-vertical",fontSize:"1.25rem"}),iconButtonProps:{size:"small",sx:{color:"text.secondary"}},options:["View Contact","Mute Notifications","Block Contact","Clear Chat","Report"]})]})]}),e&&t.userProfile?(0,s.jsx)(B,{hidden:r,data:{...e,userContact:t.userProfile}}):null,(0,s.jsx)(X,{store:t,dispatch:l,sendMsg:o}),(0,s.jsx)(Q,{store:t,hidden:r,statusObj:c,getInitials:d,sidebarWidth:x,userProfileRightOpen:h,handleUserProfileRightSidebarToggle:m})]}):(0,s.jsxs)(V,{sx:{...a?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:{}},children:[(0,s.jsx)(Z.Z,{sx:{mb:5,pt:8,pb:7,px:7.5,width:110,height:110,boxShadow:3,"& svg":{color:"action.active"},backgroundColor:"background.paper"},children:(0,s.jsx)(R.Z,{icon:"mdi:message-outline",fontSize:"3.125rem"})}),(0,s.jsx)(i.Z,{onClick:p,sx:{px:6,py:2.25,boxShadow:3,borderRadius:5,backgroundColor:"background.paper",cursor:a?"default":"pointer"},children:(0,s.jsx)(v.Z,{sx:{fontWeight:600},children:"Start Conversation"})})]})}})()},q=()=>{let[e,t]=(0,n.useState)("online"),[r,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!1),[g,j]=(0,n.useState)(!1),Z=(0,o.Z)(),{settings:f}=(0,d.r)(),b=(0,l.I0)(),y=(0,a.Z)(Z.breakpoints.down("lg")),v=(0,l.v9)(e=>e.chat),{skin:w}=f,C=(0,a.Z)(Z.breakpoints.up("sm")),S=C?370:300,k=(0,a.Z)(Z.breakpoints.up("md")),P={busy:"error",away:"warning",online:"success",offline:"secondary"};(0,n.useEffect)(()=>{b((0,c.YI)()),b((0,c.Pu)())},[b]);let I=()=>u(!r),R=()=>p(!m),z=()=>j(!g);return(0,s.jsxs)(i.Z,{className:"app-chat",sx:{width:"100%",display:"flex",borderRadius:1,overflow:"hidden",position:"relative",backgroundColor:"background.paper",boxShadow:"bordered"===w?0:6,..."bordered"===w&&{border:"1px solid ".concat(Z.palette.divider)}},children:[(0,s.jsx)(_,{store:v,hidden:y,mdAbove:k,dispatch:b,statusObj:P,userStatus:e,selectChat:c.Z1,getInitials:x.Q,sidebarWidth:S,setUserStatus:t,leftSidebarOpen:r,removeSelectedChat:c.sr,userProfileLeftOpen:m,formatDateToMonthShort:h.oS,handleLeftSidebarToggle:I,handleUserProfileLeftSidebarToggle:R}),(0,s.jsx)(H,{store:v,hidden:y,sendMsg:c.g_,mdAbove:k,dispatch:b,statusObj:P,getInitials:x.Q,sidebarWidth:S,userProfileRightOpen:g,handleLeftSidebarToggle:I,handleUserProfileRightSidebarToggle:z})]})};q.contentHeightFixed=!0;var J=q}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=42427)}),_N_E=e.O()}]);